{"version":3,"sources":["pages/photoswipe-demo.js"],"names":["PhotoswipeDemo","_classCallCheck","this","init","initPhotoSwipeFromDOM","$","document","ready","on","e","stopPropagation","gallerySelector","onThumbnailsClick","window","event","preventDefault","returnValue","clickedListItem","closest","el","fn","parentNode","target","srcElement","tagName","toUpperCase","index","clickedGallery","childNodes","querySelectorAll","numChildNodes","length","nodeIndex","i","nodeType","openPhotoSwipe","galleryElement","disableAnimation","fromURL","options","items","pswpElement","classList","contains","figureEl","linkEl","size","item","thumbElements","numNodes","getAttribute","split","src","w","parseInt","h","children","title","innerHTML","msrc","push","parseThumbnailElements","galleryUID","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","width","galleryPIDs","j","pid","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","galleryElements","l","setAttribute","onclick","hashData","hash","location","substring","params","vars","pair","gid","photoswipeParseHash"],"mappings":"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","file":"../../javascript/pages/photoswipe-demo.min.js","sourcesContent":["// Photoswipe Demo\n// =============================================================\n\nclass PhotoswipeDemo {\n\n  constructor () {\n\n    this.init()\n\n  }\n\n  init () {\n\n    // event handlers\n    this.initPhotoSwipeFromDOM('.pswp-gallery')\n\n    // handle propagation from figure actions `a` tags\n    $(document).ready(function () {\n      $('.figure-action > a').on('click', e => e.stopPropagation())\n    })\n  }\n\n  initPhotoSwipeFromDOM (gallerySelector) {\n    // parse slide data (url, title, size ...) from DOM elements\n    // (children of gallerySelector)\n    const parseThumbnailElements = function (el) {\n      let thumbElements = el.childNodes\n      let numNodes = thumbElements.length\n      let items = []\n      let figureEl\n      let linkEl\n      let size\n      let item\n\n      for(let i = 0; i < numNodes; i++) {\n        // <figure> element\n        figureEl = thumbElements[i]\n        // include only element nodes\n        if(figureEl.nodeType !== 1) {\n          continue\n        }\n        // <a> element\n        linkEl = figureEl.querySelectorAll('.img-link')[0]\n        size = linkEl.getAttribute('data-size').split('x')\n        // create slide object\n        item = {\n          src: linkEl.getAttribute('href'),\n          w: parseInt(size[0], 10),\n          h: parseInt(size[1], 10)\n        }\n        // img caption content\n        if(linkEl.children.length > 1) {\n          item.title = linkEl.querySelectorAll('.img-caption')[0].innerHTML\n        }\n        // <img> thumbnail element, retrieving thumbnail url\n        if(linkEl.children.length > 0) {\n          item.msrc = figureEl.querySelectorAll('img')[0].getAttribute('src')\n        }\n        // save link to element for getThumbBoundsFn\n        item.el = figureEl\n        items.push(item)\n      }\n\n      return items\n    }\n\n    // find nearest parent element\n    const closest = function closest (el, fn) {\n      return el && (fn(el) ? el : closest(el.parentNode, fn))\n    }\n\n    // triggers when user clicks on thumbnail\n    const onThumbnailsClick = function (e) {\n      e = e || window.event\n      e.preventDefault ? e.preventDefault() : e.returnValue = false\n\n      const eTarget = e.target || e.srcElement\n\n      // find root element of slide\n      const clickedListItem = closest(eTarget, function (el) {\n        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE')\n      })\n\n      if(!clickedListItem) {\n        return\n      }\n\n      // find index of clicked item by looping through all child nodes\n      // alternatively, you may define index via data- attribute\n      let clickedGallery = clickedListItem.parentNode\n      let childNodes = clickedListItem.parentNode.parentNode.parentNode.querySelectorAll('.figure')\n      let numChildNodes = childNodes.length\n      let nodeIndex = 0\n      let index\n\n      for (let i = 0; i < numChildNodes; i++) {\n        if(childNodes[i].nodeType !== 1) {\n          continue\n        }\n\n        if(childNodes[i] === clickedListItem) {\n          index = nodeIndex\n          break\n        }\n        nodeIndex++\n      }\n\n      if(index >= 0) {\n        // open PhotoSwipe if valid index found\n        openPhotoSwipe( index, clickedGallery )\n      }\n      return false\n    }\n\n    // parse picture index and gallery index from URL (#&pid=1&gid=2)\n    const photoswipeParseHash = function () {\n      let hash = window.location.hash.substring(1)\n      let params = {}\n\n      if(hash.length < 5) {\n        return params\n      }\n\n      let vars = hash.split('&')\n      for (let i = 0; i < vars.length; i++) {\n        if(!vars[i]) {\n          continue\n        }\n        let pair = vars[i].split('=')\n        if(pair.length < 2) {\n          continue\n        }\n        params[pair[0]] = pair[1]\n      }\n\n      if(params.gid) {\n        params.gid = parseInt(params.gid, 10)\n      }\n\n      return params\n    }\n\n    const openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\n      let pswpElement = document.querySelectorAll('.pswp')[0]\n      let gallery\n      let options\n      let items\n\n      // refer to galerySelector\n      galleryElement = galleryElement.classList.contains('card-figure')\n        ? galleryElement.parentNode.parentNode\n        : galleryElement\n      items = parseThumbnailElements(galleryElement)\n\n      // define options (if needed)\n      options = {\n        // define gallery index (for URL)\n        galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n        getThumbBoundsFn: function (index) {\n          // See Options -> getThumbBoundsFn section of documentation for more info\n          let thumbnail = items[index].el.getElementsByTagName('img')[0] // find thumbnail\n          let pageYScroll = window.pageYOffset || document.documentElement.scrollTop\n          let rect = thumbnail.getBoundingClientRect()\n\n          return {x:rect.left, y:rect.top + pageYScroll, w:rect.width}\n        }\n      }\n\n      // PhotoSwipe opened from URL\n      if(fromURL) {\n        if(options.galleryPIDs) {\n          // parse real index when custom PIDs are used\n          // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n          for(let j = 0; j < items.length; j++) {\n            if(items[j].pid == index) {\n              options.index = j\n              break\n            }\n          }\n        } else {\n          // in URL indexes start from 1\n          options.index = parseInt(index, 10) - 1\n        }\n      } else {\n        options.index = parseInt(index, 10)\n      }\n\n      // exit if index not found\n      if( isNaN(options.index) ) {\n        return\n      }\n\n      if(disableAnimation) {\n        options.showAnimationDuration = 0\n      }\n\n      // Pass data to PhotoSwipe and initialize it\n      gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options)\n      gallery.init()\n    }\n\n    // loop through all gallery elements and bind events\n    const galleryElements = document.querySelectorAll( gallerySelector )\n\n    for(let i = 0, l = galleryElements.length; i < l; i++) {\n      galleryElements[i].setAttribute('data-pswp-uid', i+1)\n      galleryElements[i].onclick = onThumbnailsClick\n    }\n\n    // Parse URL and open gallery if it contains #&pid=3&gid=1\n    const hashData = photoswipeParseHash()\n    if(hashData.pid && hashData.gid) {\n      openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true )\n    }\n  }\n}\n\n\n/**\n * Keep in mind that your scripts may not always be executed after the theme is completely ready,\n * you might need to observe the `theme:load` event to make sure your scripts are executed after the theme is ready.\n */\n$(document).on('theme:init', () => {\n  new PhotoswipeDemo()\n})\n"]}